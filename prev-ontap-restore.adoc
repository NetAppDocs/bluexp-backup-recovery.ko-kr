---
sidebar: sidebar 
permalink: prev-ontap-restore.html 
keywords: backing up, back up, backup, backup application data, Amazon Web services, AWS, BlueXP backup and recovery, Oracle database, Microsoft SQL Server database, SAP HANA database 
summary: BlueXP 백업 및 복구를 사용하면 백업 파일에서 전체 ONTAP 볼륨을 복원할 수 있으며, 몇 개의 파일만 복원하면 되는 경우 폴더나 개별 파일을 복원할 수 있습니다. 
---
= BlueXP 백업 및 복구를 사용하여 백업 파일에서 ONTAP 데이터 복원
:hardbreaks:
:allow-uri-read: 
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ./media/


[role="lead"]
ONTAP 볼륨 데이터의 백업은 오브젝트 스토리지에 저장된 Snapshot 복사본, 복제된 볼륨 및 백업 등 백업을 생성한 위치에서 사용할 수 있습니다. 이러한 백업 위치에서 특정 시점의 데이터를 복원할 수 있습니다. BlueXP 백업 및 복구를 사용하면 백업 파일에서 전체 ONTAP 볼륨을 복원할 수 있으며, 몇 개의 파일만 복원하면 되는 경우 폴더나 개별 파일을 복원할 수 있습니다.

[]
====
*참고* BlueXP backup and recovery 워크로드로 전환하려면 다음을 참조하세요. link:br-start-switch-ui.html["다양한 BlueXP backup and recovery 워크로드로 전환"] .

====
* 볼륨 * (새 볼륨으로)을 원래 작업 환경, 동일한 클라우드 계정을 사용하는 다른 작업 환경 또는 온프레미스 ONTAP 시스템으로 복원할 수 있습니다.
* 원래 작업 환경의 볼륨, 동일한 클라우드 계정을 사용하는 다른 작업 환경의 볼륨 또는 온프레미스 ONTAP 시스템의 볼륨으로 * 폴더 * 를 복원할 수 있습니다.
* 원래 작업 환경의 볼륨, 동일한 클라우드 계정을 사용하는 다른 작업 환경의 볼륨 또는 온프레미스 ONTAP 시스템의 볼륨으로 * 파일 * 을 복원할 수 있습니다.


백업 파일에서 운영 시스템으로 데이터를 복원하려면 유효한 BlueXP 백업 및 복구 라이센스가 필요합니다.

요약하면, 볼륨 데이터를 ONTAP 작업 환경으로 복원하는 데 사용할 수 있는 유효한 플로입니다.

* 백업 파일 -> 복원된 볼륨
* 복제된 볼륨 -> 복원된 볼륨
* Snapshot 복사본 -> 복원된 볼륨



NOTE: 복원 작업이 완료되지 않으면 작업 모니터에 복구 작업이 실패했음을 표시할 때까지 복원 프로세스를 다시 시도하지 마십시오. 작업 모니터에 복구 작업이 실패했다고 표시되기 전에 복구 프로세스를 다시 시도하면 복구 작업이 다시 실패합니다. 작업 모니터 상태가 "실패"로 표시되면 복원 프로세스를 다시 시도할 수 있습니다.


NOTE: ONTAP 데이터 복원과 관련된 제한 사항은 를 link:br-reference-limitations.html["ONTAP 볼륨에 대한 백업 및 복구 제한 사항"]참조하십시오.



== 복구 대시보드

Restore Dashboard를 사용하여 볼륨, 폴더 및 파일 복원 작업을 수행할 수 있습니다. BlueXP 메뉴에서 * 백업 및 복구 * 를 클릭한 다음 * 복원 * 탭을 클릭하여 복원 대시보드에 액세스합니다. 클릭할 수도 있습니다 image:icon-options-vertical.gif["자세히 단추"] > 서비스 패널의 백업 및 복구 서비스에서 *복원 대시보드 보기*


NOTE: BlueXP 백업 및 복구는 적어도 하나의 작업 환경에 대해 이미 활성화되어 있어야 하며 초기 백업 파일이 있어야 합니다.

image:screenshot_restore_dashboard.png["Browse  amp; Restore 또는 Search  amp; Restore 기능을 사용할 수 있는 옵션이 표시된 Restore Dashboard입니다."]

보시다시피, 복원 대시보드는 백업 파일에서 데이터를 복원하는 두 가지 방법을 제공합니다. *찾아보기 및 복원*과 *검색 및 복원*입니다.



== Browse & Restore와 Search & Restore 비교

일반적으로, 최근 주나 월로부터 특정 볼륨, 폴더 또는 파일을 복원해야 할 때 _Browse & Restore_가 더 낫습니다. 파일의 이름과 위치, 파일의 마지막 상태가 양호한 날짜를 알고 있어야 합니다. 일반적으로 볼륨, 폴더 또는 파일을 복원해야 할 때 검색 및 복원 _ 이(가) 더 좋지만 정확한 이름, 해당 볼륨이 있는 볼륨 또는 상태가 양호한 마지막 날짜를 기억하지 못합니다.

이 표는 두 가지 방법의 기능을 비교한 것입니다.

[cols="50,50"]
|===
| 찾아보기 및 복원 | 검색 및 복원 


| 폴더 스타일 구조를 탐색하여 단일 백업 파일 내에서 볼륨, 폴더 또는 파일을 찾습니다. | 전체 볼륨 이름, 일부 또는 전체 폴더/파일 이름, 크기 범위 및 추가 검색 필터를 사용하여 * 모든 백업 파일 * 에서 볼륨, 폴더 또는 파일을 검색합니다. 


| 파일이 삭제되었거나 이름이 변경된 경우 파일 복구를 처리하지 않고 사용자가 원래 파일 이름을 모르는 경우 | 새로 생성/삭제/이름 변경된 디렉토리와 새로 생성/삭제/이름 변경된 파일을 처리합니다 


| 추가 클라우드 공급자 리소스가 필요하지 않습니다 | 클라우드에서 복구할 경우 계정당 추가 버킷 및 퍼블릭 클라우드 공급자 리소스가 필요합니다. 


| 추가 클라우드 공급자 비용은 필요하지 않습니다 | 클라우드에서 복구할 경우 검색 결과를 위해 백업과 볼륨을 스캔할 때 추가 비용이 필요합니다. 


| 빠른 복원이 지원됩니다. | 빠른 복원은 지원되지 않습니다. 
|===
이 표는 백업 파일이 있는 위치를 기준으로 유효한 복원 작업 목록을 제공합니다.

[cols="14h,14,14,14,14,14,14"]
|===
| 백업 유형 3+| 찾아보기 및 복원 3+| 검색 및 복원 


|  | * 볼륨 복원 * | * 파일 복원 * | * 폴더 복원 * | * 볼륨 복원 * | * 파일 복원 * | * 폴더 복원 * 


| 스냅샷 복사본 | 예 | 아니요 | 아니요 | 예 | 예 | 예 


| 복제된 볼륨 | 예 | 아니요 | 아니요 | 예 | 예 | 예 


| 백업 파일 | 예 | 예 | 예 | 예 | 예 | 예 
|===
두 복원 방법을 모두 사용하려면 먼저 고유한 리소스 요구 사항에 맞게 환경을 구성해야 합니다. 이러한 요구 사항은 아래 섹션에 설명되어 있습니다.

사용할 복원 작업 유형에 대한 요구 사항 및 복원 단계를 참조하십시오.

* <<Browse  amp; Restore를 사용하여 볼륨을 복원합니다,Browse  amp; Restore를 사용하여 볼륨을 복원합니다
* <<찾아보기 및 amp; 복원을 사용하여 폴더와 파일을 복원합니다,찾아보기 및 amp; 복원을 사용하여 폴더와 파일을 복원합니다>>
* <<restore-ontap-data-using-search-restore,검색 및 amp;Restore를 사용하여 볼륨, 폴더 및 파일을 복원합니다>>




== 찾아보기 및 복원을 사용하여 ONTAP 데이터를 복원합니다

볼륨, 폴더 또는 파일 복원을 시작하기 전에 복원할 볼륨의 이름, 작업 환경의 이름 및 볼륨이 있는 SVM의 이름, 복원할 백업 파일의 대략적인 날짜를 알아야 합니다. 스냅샷 복사본, 복제된 볼륨 또는 오브젝트 스토리지에 저장된 백업에서 ONTAP 데이터를 복원할 수 있습니다.

* 참고: * 복원하려는 데이터가 포함된 백업 파일이 보관 클라우드 저장소(ONTAP 9.10.1부터 시작)에 있는 경우 복원 작업에 더 많은 시간이 소요되고 비용이 발생합니다. 또한 대상 클러스터는 볼륨 복원의 경우 ONTAP 9.10.1 이상, 파일 복원의 경우 9.11.1, Google 아카이브 및 StorageGRID의 경우 9.12.1, 폴더 복원의 경우 9.13.1 이상을 실행해야 합니다.

ifdef::aws[]

link:prev-reference-aws-archive-storage-tiers.html["AWS 아카이브 스토리지에서 복원하는 방법에 대해 자세히 알아보십시오"]..

endif::aws[]

ifdef::azure[]

link:prev-reference-azure-archive-storage-tiers.html["Azure 아카이브 스토리지에서 복원에 대해 자세히 알아보십시오"]..

endif::azure[]

ifdef::gcp[]

link:prev-reference-gcp-archive-storage-tiers.html["Google 아카이브 스토리지에서 복원하는 방법에 대해 자세히 알아보십시오"]..

endif::gcp[]


NOTE: Azure 아카이브 스토리지에서 StorageGRID 시스템으로 데이터를 복원할 때는 높은 우선 순위가 지원되지 않습니다.



=== Browse & Restore 지원되는 작업 환경 및 객체 스토리지 공급자

보조 작업 환경(복제된 볼륨) 또는 오브젝트 스토리지(백업 파일)에 있는 백업 파일에서 다음 작업 환경으로 ONTAP 데이터를 복원할 수 있습니다. 스냅샷 복사본은 소스 작업 환경에 있으며 동일한 시스템에만 복원할 수 있습니다.

* 참고: * 모든 유형의 백업 파일에서 볼륨을 복원할 수 있지만 현재 개체 저장소의 백업 파일에서만 폴더 또는 개별 파일을 복원할 수 있습니다.

[cols="25,25,25,25"]
|===
| * 개체 저장소(백업) * | * 기본 (스냅샷) * 에서 | * 보조 시스템에서(복제) * | 대상 작업 환경으로

ifdef::AWS[] 


| Amazon S3 | AWS의 Cloud Volumes ONTAP
사내 ONTAP 시스템 | AWS의 Cloud Volumes ONTAP
사내 ONTAP 시스템

엔디프::AWS[]



ifdef::Azure[] | Azure Blob 


| Azure의 Cloud Volumes ONTAP
사내 ONTAP 시스템 | Azure의 Cloud Volumes ONTAP
사내 ONTAP 시스템

엔디프::Azure[]



ifdef::GCP[] | Google 클라우드 스토리지 | Google의 Cloud Volumes ONTAP
사내 ONTAP 시스템 


| Google 사내 ONTAP 시스템의 Cloud Volumes ONTAP::GCP [] | NetApp StorageGRID를 참조하십시오 | 사내 ONTAP 시스템 | 사내 ONTAP 시스템
Cloud Volumes ONTAP 


| 온프레미스 ONTAP 시스템으로 전환 | ONTAP S3 | 사내 ONTAP 시스템 | 사내 ONTAP 시스템
Cloud Volumes ONTAP 
|===
ifdef::aws[]

endif::aws[]

ifdef::azure[]

endif::azure[]

ifdef::gcp[]

endif::gcp[]

찾아보기 및 복원의 경우 커넥터를 다음 위치에 설치할 수 있습니다.

ifdef::aws[]

* Amazon S3의 경우 Connector를 AWS 또는 사내에 구현할 수 있습니다


endif::aws[]

ifdef::azure[]

* Azure Blob의 경우 Connector를 Azure 또는 사내에 배포할 수 있습니다


endif::azure[]

ifdef::gcp[]

* Google 클라우드 스토리지의 경우 Connector를 Google Cloud Platform VPC에 구축해야 합니다


endif::gcp[]

* StorageGRID의 경우 인터넷 액세스 유무에 관계없이 커넥터를 사내에 구축해야 합니다
* ONTAP S3의 경우 커넥터를 온프레미스(인터넷 액세스 유무에 관계없이) 또는 클라우드 공급자 환경에 배포할 수 있습니다


"사내 ONTAP 시스템"을 지칭할 때 FAS, AFF 및 ONTAP Select 시스템이 포함됩니다.


NOTE: 시스템의 ONTAP 버전이 9.13.1 미만인 경우, 백업 파일이 DataLock 및 랜섬웨어로 구성되어 있으면 폴더나 파일을 복원할 수 없습니다. 이 경우 백업 파일에서 전체 볼륨을 복원한 다음 필요한 파일에 액세스할 수 있습니다.



=== Browse & amp; Restore를 사용하여 볼륨을 복원합니다

백업 파일에서 볼륨을 복원할 때 BlueXP 백업 및 복구는 백업의 데이터를 사용하여 _new_volume을 생성합니다. 오브젝트 스토리지의 백업을 사용하는 경우 데이터를 원래 작업 환경의 볼륨, 소스 작업 환경과 동일한 클라우드 계정에 있는 다른 작업 환경 또는 사내 ONTAP 시스템에 복원할 수 있습니다.

ONTAP 9.13.0 이상을 사용하는 Cloud Volumes ONTAP 시스템 또는 ONTAP 9.14.1을 실행하는 사내 ONTAP 시스템으로 클라우드 백업을 복원할 때 _QUICK RESTORY_OPERATION을 수행할 수 있습니다. 빠른 복원은 가능한 한 빨리 볼륨에 대한 액세스를 제공해야 하는 재해 복구 상황에 이상적입니다. 빠른 복원은 전체 백업 파일을 복원하는 대신 백업 파일의 메타데이터를 볼륨으로 복원합니다. 빠른 복원은 성능이나 지연 시간에 민감한 애플리케이션에는 권장되지 않으며 아카이빙된 스토리지의 백업에는 지원되지 않습니다.


NOTE: 빠른 복원은 클라우드 백업이 생성된 소스 시스템에서 ONTAP 9.12.1 이상을 실행 중인 경우에만 FlexGroup 볼륨에 대해 지원됩니다. 또한 소스 시스템에서 ONTAP 9.11.0 이상을 실행 중인 경우에만 SnapLock 볼륨에 대해 지원됩니다.

복제된 볼륨에서 복원할 때 원래 작업 환경 또는 Cloud Volumes ONTAP 또는 온-프레미스 ONTAP 시스템으로 볼륨을 복원할 수 있습니다.

image:diagram_browse_restore_volume.png["Browse  amp; Restore를 사용하여 볼륨 복원 작업을 수행하는 흐름을 보여 주는 다이어그램"]

보시다시피 볼륨 복구를 수행하려면 소스 작업 환경 이름, 스토리지 VM, 볼륨 이름 및 백업 파일 날짜를 알아야 합니다.

.단계
. BlueXP 메뉴에서 * 보호 > 백업 및 복구 * 를 선택합니다.
. *복원* 탭을 선택하면 복원 대시보드가 표시됩니다.
. _찾아보기 및 복원_ 섹션에서 *볼륨 복원*을 선택합니다.
+
image:screenshot_restore_dashboard.png["Browse  amp; Restore 또는 Search  amp; Restore 기능을 사용할 수 있는 옵션이 표시된 Restore Dashboard입니다."]

. Select Source_페이지에서 복원하려는 볼륨의 백업 파일로 이동합니다. 복원할 날짜/시간 스탬프가 있는 * Working Environment *, * Volume * 및 * Backup * 파일을 선택합니다.
+
Location * 열에는 백업 파일(스냅샷)이 * Local * (소스 시스템의 스냅샷 복사본), * Secondary * (보조 ONTAP 시스템의 복제된 볼륨) 또는 * Object Storage * (오브젝트 스토리지의 백업 파일)인지 여부가 표시됩니다. 복원할 파일을 선택합니다.

+
image:screenshot_restore_select_volume_snapshot.png["복원할 작업 환경, 볼륨 및 볼륨 백업 파일을 선택하는 스크린샷."]

. 다음 * 을 선택합니다.
+
오브젝트 스토리지에서 백업 파일을 선택하고 랜섬웨어 보호가 해당 백업에 활성 상태인 경우(백업 정책에서 DataLock 및 랜섬웨어 보호를 활성화한 경우) 데이터를 복원하기 전에 백업 파일에 대해 추가 랜섬웨어 검사를 실행하라는 메시지가 표시됩니다. 랜섬웨어에 대한 백업 파일을 검사하는 것이 좋습니다. (백업 파일의 컨텐츠에 액세스하는 데 필요한 추가 송신 비용이 클라우드 공급자에게 추가로 발생합니다.)

. 대상 선택 페이지에서 볼륨을 복원할 * 작업 환경 * 을 선택합니다.
+
image:screenshot_restore_select_work_env_volume.png["복원하려는 볼륨의 대상 작업 환경을 선택하는 스크린샷."]

. 오브젝트 저장소에서 백업 파일을 복원할 때, 온프레미스 ONTAP 시스템을 선택하고 오브젝트 스토리지에 대한 클러스터 연결을 아직 구성하지 않은 경우 추가 정보를 묻는 메시지가 표시됩니다.
+
ifdef::aws[]

+
** Amazon S3에서 복원할 때 대상 볼륨이 상주할 ONTAP 클러스터에서 IPspace를 선택하고 ONTAP 클러스터에 S3 버킷에 대한 액세스 권한을 부여하기 위해 생성한 사용자의 액세스 키 및 암호 키를 입력합니다. 그리고 데이터 전송 보안을 위해 프라이빗 VPC 엔드포인트를 선택할 수도 있습니다.




endif::aws[]

ifdef::azure[]

* Azure Blob에서 복구할 경우 대상 볼륨이 상주할 ONTAP 클러스터에서 IPspace를 선택하고, 오브젝트 스토리지에 액세스할 Azure 구독을 선택한 다음 VNET 및 서브넷을 선택하여 보안 데이터 전송을 위한 프라이빗 끝점을 선택합니다.


endif::azure[]

ifdef::gcp[]

* Google 클라우드 스토리지에서 복원할 때 Google 클라우드 프로젝트 및 액세스 키 및 비밀 키를 선택하여 오브젝트 스토리지, 백업이 저장되는 지역 및 대상 볼륨이 상주할 ONTAP 클러스터의 IPspace에 액세스합니다.


endif::gcp[]

* StorageGRID에서 복구할 때 StorageGRID 서버의 FQDN과 ONTAP이 StorageGRID와 HTTPS 통신에 사용해야 하는 포트를 입력하고, 객체 스토리지에 액세스하는 데 필요한 액세스 키 및 비밀 키를 선택하고, 대상 볼륨이 상주할 ONTAP 클러스터의 IPspace를 선택합니다.
* ONTAP S3에서 복원하는 경우 ONTAP S3 서버의 FQDN과 ONTAP가 ONTAP S3와의 HTTPS 통신에 사용해야 하는 포트를 입력하고 오브젝트 스토리지에 액세스하는 데 필요한 액세스 키 및 암호 키를 선택합니다. 및 대상 볼륨이 상주할 ONTAP 클러스터의 IPspace입니다.
+
.. 복원된 볼륨에 사용할 이름을 입력하고 볼륨이 상주하는 스토리지 VM 및 Aggregate를 선택합니다. FlexGroup 볼륨을 복원할 때 여러 애그리게이트를 선택해야 합니다. 기본적으로 * <source_volume_name>_restore * 가 볼륨 이름으로 사용됩니다.
+
image:screenshot_restore_new_vol_name.png["복원하려는 새 볼륨의 이름을 입력하는 스크린샷."]

+
ONTAP 9.13.0 이상을 사용하여 오브젝트 스토리지에서 Cloud Volumes ONTAP 시스템으로 백업을 복원하거나 ONTAP 9.14.1을 실행하는 사내 ONTAP 시스템으로 백업을 복원할 때 _QUICK RESTORE_OPERATION을 수행할 수 있습니다.

+
아카이브 스토리지 계층에 있는 백업 파일(ONTAP 9.10.1부터 사용 가능)에서 볼륨을 복원하는 경우 복원 우선 순위를 선택할 수 있습니다.

+
ifdef::aws[]





link:prev-reference-aws-archive-storage-tiers.html["AWS 아카이브 스토리지에서 복원하는 방법에 대해 자세히 알아보십시오"]..

endif::aws[]

ifdef::azure[]

link:prev-reference-azure-archive-storage-tiers.html["Azure 아카이브 스토리지에서 복원에 대해 자세히 알아보십시오"]..

endif::azure[]

ifdef::gcp[]

link:prev-reference-gcp-archive-storage-tiers.html["Google 아카이브 스토리지에서 복원하는 방법에 대해 자세히 알아보십시오"].. Google 아카이브 스토리지 계층의 백업 파일은 거의 즉시 복원되며 복원 우선 순위가 필요하지 않습니다.

endif::gcp[]

. *다음*을 선택하여 일반 복원 또는 빠른 복원 프로세스를 수행할지 여부를 선택하세요.
+
image:screenshot_restore_browse_quick_restore.png["일반 및 빠른 복원 프로세스를 보여 주는 스크린샷"]

+
** * Normal restore * : 고성능이 필요한 볼륨에 일반 복원을 사용합니다. 복원 프로세스가 완료될 때까지 볼륨을 사용할 수 없습니다.
** * 빠른 복원 * : 복원 된 볼륨 및 데이터는 즉시 사용할 수 있습니다. 빠른 복원 프로세스 중에 데이터 액세스가 평소보다 느려질 수 있으므로 고성능이 필요한 볼륨에는 이 기능을 사용하지 마십시오.


. *복원*을 선택하면 복원 대시보드로 돌아가서 복원 작업의 진행 상황을 검토할 수 있습니다.


.결과
BlueXP 백업 및 복구는 선택한 백업을 기반으로 새 볼륨을 생성합니다.

아카이브 스토리지에 있는 백업 파일에서 볼륨을 복원하는 데는 아카이브 계층 및 복원 우선 순위에 따라 몇 분 또는 몇 시간이 걸릴 수 있습니다. *작업 모니터링* 탭을 선택하면 복원 진행 상황을 볼 수 있습니다.



=== 찾아보기 및 amp; 복원을 사용하여 폴더와 파일을 복원합니다

ONTAP 볼륨 백업에서 몇 개의 파일만 복원해야 하는 경우 전체 볼륨을 복원하는 대신 폴더 또는 개별 파일을 복원하도록 선택할 수 있습니다. 폴더 및 파일을 원래 작업 환경의 기존 볼륨이나 동일한 클라우드 계정을 사용하는 다른 작업 환경으로 복원할 수 있습니다. 또한 온프레미스 ONTAP 시스템의 볼륨에 폴더 및 파일을 복원할 수 있습니다.


NOTE: 폴더 또는 개별 파일은 개체 저장소의 백업 파일에서만 복원할 수 있습니다. 현재 로컬 스냅샷 복사본이나 보조 작업 환경(복제된 볼륨)에 있는 백업 파일에서 파일과 폴더를 복원하는 것은 지원되지 않습니다.

여러 파일을 선택하면 모든 파일이 선택한 동일한 대상 볼륨으로 복원됩니다. 따라서 파일을 다른 볼륨으로 복원하려면 복원 프로세스를 여러 번 실행해야 합니다.

ONTAP 9.13.0 이상을 사용하는 경우 폴더 내의 모든 파일 및 하위 폴더와 함께 폴더를 복원할 수 있습니다. 9.13.0 이전 버전의 ONTAP를 사용하는 경우 해당 폴더의 파일만 복원되고 하위 폴더의 파일은 복원되지 않습니다.

[NOTE]
====
* 백업 파일이 DataLock 및 랜섬웨어 보호를 사용하여 구성된 경우 ONTAP 버전이 9.13.1 이상인 경우에만 폴더 레벨 복원이 지원됩니다. 이전 버전의 ONTAP를 사용하는 경우 백업 파일에서 전체 볼륨을 복원한 다음 필요한 폴더 및 파일에 액세스할 수 있습니다.
* 백업 파일이 아카이브 스토리지에 있는 경우 ONTAP 버전이 9.13.1 이상인 경우에만 폴더 레벨 복원이 지원됩니다. 이전 버전의 ONTAP를 사용 중인 경우 보관되지 않은 최신 백업 파일에서 폴더를 복원하거나, 아카이빙된 백업에서 전체 볼륨을 복원한 다음 필요한 폴더 및 파일에 액세스할 수 있습니다.
* ONTAP 9.15.1을 사용하면 "찾아보기 및 복원" 옵션을 사용하여 FlexGroup 폴더를 복원할 수 있습니다. 이 기능은 기술 미리 보기 모드에 있습니다.
+
에 설명된 특수 플래그를 사용하여 테스트할 수 https://community.netapp.com/t5/Tech-ONTAP-Blogs/BlueXP-Backup-and-Recovery-July-2024-Release/ba-p/453993#toc-hId-1830672444["BlueXP 백업 및 복구 2024년 7월 릴리즈 블로그"^]있습니다.



====


==== 필수 구성 요소

* FILE_RESTORE 작업을 수행하려면 ONTAP 버전이 9.6 이상이어야 합니다.
* folder_restore 작업을 수행하려면 ONTAP 버전이 9.11.1 이상이어야 합니다. 데이터가 아카이브 스토리지에 있거나 백업 파일이 DataLock 및 랜섬웨어 보호를 사용하는 경우 ONTAP 버전 9.13.1 이 필요합니다.
* 찾아보기 및 복원 옵션을 사용하여 FlexGroup 디렉토리를 복원하려면 ONTAP 버전이 9.15.1 P2 이상이어야 합니다.




==== 폴더 및 파일 복원 프로세스

프로세스는 다음과 같습니다.

. 볼륨 백업에서 폴더 또는 하나 이상의 파일을 복원하려면 * 복원 * 탭을 클릭하고 _찾아보기 및 복원_ 아래에서 * 파일 또는 폴더 복원 * 을 클릭합니다.
. 폴더 또는 파일이 있는 소스 작업 환경, 볼륨 및 백업 파일을 선택합니다.
. BlueXP 백업 및 복구에는 선택한 백업 파일 내에 있는 폴더와 파일이 표시됩니다.
. 해당 백업에서 복원할 폴더 또는 파일을 선택합니다.
. 폴더 또는 파일을 복원할 대상 위치(작업 환경, 볼륨 및 폴더)를 선택하고 * 복원 * 을 클릭합니다.
. 파일이 복원됩니다.


image:diagram_browse_restore_file.png["Browse  amp; Restore를 사용하여 파일 복원 작업을 수행하는 흐름을 보여 주는 다이어그램"]

보시다시피 폴더 또는 파일 복원을 수행하려면 작업 환경 이름, 볼륨 이름, 백업 파일 날짜 및 폴더/파일 이름을 알아야 합니다.



==== 폴더 및 파일을 복원합니다

ONTAP 볼륨 백업에서 폴더 또는 파일을 볼륨으로 복원하려면 다음 단계를 수행하십시오. 폴더 또는 파일을 복원하는 데 사용할 볼륨 이름과 백업 파일 날짜를 알아야 합니다. 이 기능은 Live Browsing을 사용하여 각 백업 파일 내의 디렉터리 및 파일 목록을 볼 수 있습니다.

.단계
. BlueXP 메뉴에서 * 보호 > 백업 및 복구 * 를 선택합니다.
. *복원* 탭을 선택하면 복원 대시보드가 표시됩니다.
. _찾아보기 및 복원_ 섹션에서 *파일 또는 폴더 복원*을 선택합니다.
+
image:screenshot_restore_dashboard.png["Browse  amp; Restore 또는 Search  amp; Restore 기능을 사용할 수 있는 옵션이 표시된 Restore Dashboard입니다."]

. Select Source_페이지에서 복원하려는 파일이 포함된 볼륨의 백업 파일을 찾습니다. 파일을 복원할 날짜/시간 스탬프가 있는 * Working Environment *, * Volume * 및 * Backup * 을 선택합니다.
+
image:screenshot_restore_select_source.png["복원하려는 항목의 볼륨 및 백업 선택 스크린샷."]

. *다음*을 선택하면 볼륨 백업의 폴더와 파일 목록이 표시됩니다.
+
아카이브 스토리지 계층에 있는 백업 파일에서 폴더 또는 파일을 복구하는 경우 복구 우선 순위를 선택할 수 있습니다.

+
link:prev-reference-aws-archive-storage-tiers.html["AWS 아카이브 스토리지에서 복원하는 방법에 대해 자세히 알아보십시오"].. link:prev-reference-azure-archive-storage-tiers.html["Azure 아카이브 스토리지에서 복원에 대해 자세히 알아보십시오"].. link:prev-reference-gcp-archive-storage-tiers.html["Google 아카이브 스토리지에서 복원하는 방법에 대해 자세히 알아보십시오"].. Google 아카이브 스토리지 계층의 백업 파일은 거의 즉시 복원되며 복원 우선 순위가 필요하지 않습니다.

+
백업 파일에 대해 랜섬웨어 보호가 활성 상태인 경우(백업 정책에서 DataLock 및 랜섬웨어 보호를 활성화한 경우) 데이터를 복원하기 전에 백업 파일에 대한 추가 랜섬웨어 검사를 실행하라는 메시지가 표시됩니다. 랜섬웨어에 대한 백업 파일을 검사하는 것이 좋습니다. (백업 파일의 컨텐츠에 액세스하는 데 필요한 추가 송신 비용이 클라우드 공급자에게 추가로 발생합니다.)

+
image:screenshot_restore_select_files.png["복원할 항목을 탐색할 수 있는 항목 선택 페이지의 스크린 샷"]

. _항목 선택_ 페이지에서 복원하려는 폴더나 파일을 선택하고 *계속*을 선택합니다. 항목을 찾는 데 도움이 되는 방법:
+
** 폴더나 파일 이름이 보이면 선택할 수 있습니다.
** 검색 아이콘을 선택하고 폴더나 파일 이름을 입력하면 해당 항목으로 바로 이동할 수 있습니다.
** 행 끝에 있는 아래쪽 화살표를 사용하여 폴더의 하위 수준으로 이동하여 특정 파일을 찾을 수 있습니다.
+
파일을 선택하면 이미 선택한 파일을 볼 수 있도록 페이지 왼쪽에 추가됩니다. 필요한 경우 파일 이름 옆에 있는 *x*를 선택하여 이 목록에서 파일을 제거할 수 있습니다.



. 대상 선택 페이지에서 항목을 복원할 * 작업 환경 * 을 선택합니다.
+
image:screenshot_restore_select_work_env.png["복원하려는 항목의 대상 작업 환경 선택 스크린샷"]

+
사내 클러스터를 선택하고 오브젝트 스토리지에 대한 클러스터 연결을 아직 구성하지 않은 경우 추가 정보를 묻는 메시지가 표시됩니다.

+
ifdef::aws[]

+
** Amazon S3에서 복원할 때 대상 볼륨이 있는 ONTAP 클러스터에 IPspace를 입력하고 오브젝트 스토리지에 액세스하는 데 필요한 AWS 액세스 키 및 비밀 키를 입력합니다. 또한 클러스터에 연결할 전용 링크 구성을 선택할 수도 있습니다.




endif::aws[]

ifdef::azure[]

* Azure Blob에서 복구할 경우 대상 볼륨이 있는 ONTAP 클러스터에 IPspace를 입력합니다. 클러스터에 연결할 개별 엔드포인트 구성을 선택할 수도 있습니다.


endif::azure[]

ifdef::gcp[]

* Google 클라우드 스토리지에서 복원할 때 대상 볼륨이 있는 ONTAP 클러스터에 IPspace를 입력하고 오브젝트 스토리지에 액세스하는 데 필요한 액세스 키 및 비밀 키를 입력합니다.


endif::gcp[]

* StorageGRID에서 복구할 때 StorageGRID 서버의 FQDN과 ONTAP이 StorageGRID과의 HTTPS 통신에 사용해야 하는 포트를 입력하고, 오브젝트 스토리지에 액세스하는 데 필요한 액세스 키 및 비밀 키, 대상 볼륨이 있는 ONTAP 클러스터의 IPspace를 입력합니다.
+
.. 그런 다음 폴더 또는 파일을 복원할 * 볼륨 * 과 * 폴더 * 를 선택합니다.
+
폴더 및 파일을 복원할 때 위치에 대한 몇 가지 옵션이 있습니다.



* 위와 같이 * 대상 폴더 선택 * 을 선택한 경우:
+
** 폴더를 선택할 수 있습니다.
** 폴더 위에 마우스를 올려놓고 행의 끝을 클릭하면 하위 폴더로 드릴다운한 다음 폴더를 선택할 수 있습니다.


* 소스 폴더/파일이 있는 위치와 동일한 대상 작업 환경 및 볼륨을 선택한 경우 * 소스 폴더 경로 유지 * 를 선택하여 폴더 또는 파일을 소스 구조에 있는 동일한 폴더로 복원할 수 있습니다. 모든 동일한 폴더와 하위 폴더가 이미 존재해야 하며 폴더가 생성되지 않습니다. 파일을 원래 위치로 복원할 때 소스 파일을 덮어쓰거나 새 파일을 만들도록 선택할 수 있습니다.
+
.. *복원*을 선택하면 복원 대시보드로 돌아가서 복원 작업의 진행 상황을 검토할 수 있습니다. 또한 * Job Monitoring * 탭을 클릭하여 복원 진행률을 확인할 수도 있습니다.






== 검색 및 복원을 사용하여 ONTAP 데이터를 복원합니다

검색 및 복원을 사용하여 ONTAP 백업 파일에서 볼륨, 폴더 또는 파일을 복원할 수 있습니다. 검색 및 복원을 사용하면 모든 백업에서 특정 볼륨, 폴더 또는 파일을 검색한 다음 복구를 수행할 수 있습니다. 정확한 작업 환경 이름, 볼륨 이름 또는 파일 이름을 알 필요가 없습니다. 모든 볼륨 백업 파일을 검색합니다.

검색 작업은 ONTAP 볼륨에 대한 모든 로컬 스냅샷 복사본, 보조 스토리지 시스템에 있는 모든 복제된 볼륨, 개체 스토리지에 있는 모든 백업 파일을 살펴봅니다. 로컬 스냅샷 복사본 또는 복제된 볼륨에서 데이터를 복원하는 것은 오브젝트 스토리지의 백업 파일에서 복원하는 것보다 빠르고 비용이 적게 들 수 있으므로 이러한 다른 위치에서 데이터를 복원할 수 있습니다.

백업 파일에서 _full volume_을(를) 복원하면 BlueXP 백업 및 복구에서 백업의 데이터를 사용하여 _new_volume을(를) 생성합니다. 데이터를 원래 작업 환경에서 볼륨 형태로 복원하거나, 소스 작업 환경과 동일한 클라우드 계정에 있는 다른 작업 환경 또는 사내 ONTAP 시스템에 복원할 수 있습니다.

폴더 또는 파일 _ 을(를) 원래 볼륨 위치, 동일한 작업 환경의 다른 볼륨, 동일한 클라우드 계정을 사용하는 다른 작업 환경 또는 온-프레미스 ONTAP 시스템의 볼륨으로 복원할 수 있습니다.

ONTAP 9.13.0 이상을 사용하는 경우 폴더 내의 모든 파일 및 하위 폴더와 함께 폴더를 복원할 수 있습니다. 9.13.0 이전 버전의 ONTAP를 사용하는 경우 해당 폴더의 파일만 복원되고 하위 폴더의 파일은 복원되지 않습니다.

복원하려는 볼륨의 백업 파일이 아카이브 스토리지(ONTAP 9.10.1부터 사용 가능)에 있는 경우 복원 작업에 더 많은 시간이 소요되고 추가 비용이 발생합니다. 또한 대상 클러스터는 볼륨 복원의 경우 ONTAP 9.10.1 이상, 파일 복원의 경우 9.11.1, Google 아카이브 및 StorageGRID의 경우 9.12.1, 폴더 복원의 경우 9.13.1 이상을 실행해야 합니다.

ifdef::aws[]

link:prev-reference-aws-archive-storage-tiers.html["AWS 아카이브 스토리지에서 복원하는 방법에 대해 자세히 알아보십시오"]..

endif::aws[]

ifdef::azure[]

link:prev-reference-azure-archive-storage-tiers.html["Azure 아카이브 스토리지에서 복원에 대해 자세히 알아보십시오"]..

endif::azure[]

ifdef::gcp[]

link:prev-reference-gcp-archive-storage-tiers.html["Google 아카이브 스토리지에서 복원하는 방법에 대해 자세히 알아보십시오"]..

endif::gcp[]

[NOTE]
====
* 오브젝트 스토리지의 백업 파일이 DataLock 및 랜섬웨어 방지 기능으로 구성된 경우 ONTAP 버전이 9.13.1 이상인 경우에만 폴더 레벨 복원이 지원됩니다. 이전 버전의 ONTAP를 사용하는 경우 백업 파일에서 전체 볼륨을 복원한 다음 필요한 폴더 및 파일에 액세스할 수 있습니다.
* 오브젝트 스토리지의 백업 파일이 아카이브 스토리지에 있는 경우 ONTAP 버전이 9.13.1 이상인 경우에만 폴더 레벨 복원이 지원됩니다. 이전 버전의 ONTAP를 사용 중인 경우 보관되지 않은 최신 백업 파일에서 폴더를 복원하거나, 아카이빙된 백업에서 전체 볼륨을 복원한 다음 필요한 폴더 및 파일에 액세스할 수 있습니다.
* Azure 아카이브 스토리지에서 StorageGRID 시스템으로 데이터를 복원할 때는 "높은" 복원 우선 순위가 지원되지 않습니다.
* 폴더 복원은 현재 ONTAP S3 오브젝트 스토리지의 볼륨에서 지원되지 않습니다.


====
시작하기 전에 복원하려는 볼륨이나 파일의 이름이나 위치를 알고 있어야 합니다.



=== 검색 및 복원 지원되는 작업 환경 및 오브젝트 스토리지 공급자

보조 작업 환경(복제된 볼륨) 또는 오브젝트 스토리지(백업 파일)에 있는 백업 파일에서 다음 작업 환경으로 ONTAP 데이터를 복원할 수 있습니다. 스냅샷 복사본은 소스 작업 환경에 있으며 동일한 시스템에만 복원할 수 있습니다.

* 참고: * 모든 유형의 백업 파일에서 볼륨 및 파일을 복원할 수 있지만 현재 개체 스토리지에 있는 백업 파일에서만 폴더를 복원할 수 있습니다.

[cols="33,33,33"]
|===
2+| 백업 파일 위치 | 대상 작업 환경 


| * 오브젝트 저장소(백업) * | * 보조 시스템(복제) * | ifdef::aws[] 


| Amazon S3 | AWS의 Cloud Volumes ONTAP
사내 ONTAP 시스템 | Cloud Volumes ONTAP in AWS on-premises ONTAP system endif::AWS[]ifdef::Azure[] 


| Azure Blob | Azure의 Cloud Volumes ONTAP
사내 ONTAP 시스템 | Azure 사내 ONTAP 시스템의 Cloud Volumes ONTAP endif::Azure []ifdef::GCP[] 


| Google 클라우드 스토리지 | Google의 Cloud Volumes ONTAP
사내 ONTAP 시스템 | Google 사내 ONTAP 시스템의 Cloud Volumes ONTAP::GCP [] 


| NetApp StorageGRID를 참조하십시오 | 사내 ONTAP 시스템
Cloud Volumes ONTAP | 사내 ONTAP 시스템 


| ONTAP S3 | 사내 ONTAP 시스템
Cloud Volumes ONTAP | 사내 ONTAP 시스템 
|===
검색 및 복원의 경우 커넥터를 다음 위치에 설치할 수 있습니다.

ifdef::aws[]

* Amazon S3의 경우 Connector를 AWS 또는 사내에 구현할 수 있습니다


endif::aws[]

ifdef::azure[]

* Azure Blob의 경우 Connector를 Azure 또는 사내에 배포할 수 있습니다


endif::azure[]

ifdef::gcp[]

* Google 클라우드 스토리지의 경우 Connector를 Google Cloud Platform VPC에 구축해야 합니다


endif::gcp[]

* StorageGRID의 경우 인터넷 액세스 유무에 관계없이 커넥터를 사내에 구축해야 합니다
* ONTAP S3의 경우 커넥터를 온프레미스(인터넷 액세스 유무에 관계없이) 또는 클라우드 공급자 환경에 배포할 수 있습니다


"사내 ONTAP 시스템"을 지칭할 때 FAS, AFF 및 ONTAP Select 시스템이 포함됩니다.



=== 필수 구성 요소

* 클러스터 요구 사항:
+
** ONTAP 버전은 9.8 이상이어야 합니다.
** 볼륨이 상주하는 스토리지 VM(SVM)에는 데이터 LIF가 구성되어 있어야 합니다.
** 볼륨에 NFS를 설정해야 합니다(NFS 및 SMB/CIFS 볼륨 모두 지원).
** SVM에서 SnapDiff RPC 서버를 활성화해야 합니다. BlueXP는 작업 환경에서 인덱싱을 활성화할 때 이 작업을 자동으로 수행합니다. SnapDiff는 스냅샷 복사본 간의 파일 및 디렉토리 차이를 신속하게 식별하는 기술입니다.




ifdef::aws[]

* AWS 요구사항:
+
** BlueXP에 권한을 제공하는 사용자 역할에 특정 Amazon Athena, AWS Glue 및 AWS S3 권한을 추가해야 합니다. link:prev-ontap-backup-onprem-aws.html["모든 권한이 올바르게 구성되었는지 확인합니다"]..
+
이전에 구성한 커넥터를 사용하여 BlueXP 백업 및 복구를 이미 사용하고 있다면 지금 BlueXP 사용자 역할에 Athena 및 Glue 권한을 추가해야 합니다. 검색 및 복원에 필요합니다.





endif::aws[]

ifdef::azure[]

* Azure 요구사항:
+
** Azure Synapse Analytics 리소스 공급자("Microsoft.Synapse")를 구독에 등록해야 합니다. https://docs.microsoft.com/en-us/azure/azure-resource-manager/management/resource-providers-and-types#register-resource-provider["이 리소스 공급자를 구독에 등록하는 방법을 확인하십시오"^]. 리소스 공급자를 등록하려면 구독 * 소유자 * 또는 * 참가자 * 여야 합니다.
** BlueXP에 권한을 제공하는 사용자 역할에 특정 Azure Synapse Workspace 및 Data Lake Storage 계정 권한을 추가해야 합니다. link:prev-ontap-backup-onprem-azure.html["모든 권한이 올바르게 구성되었는지 확인합니다"]..
+
과거에 구성한 커넥터를 사용하여 BlueXP 백업 및 복구를 이미 사용하고 있다면 지금 BlueXP 사용자 역할에 Azure Synapse Workspace 및 Data Lake Storage 계정 권한을 추가해야 합니다. 검색 및 복원에 필요합니다.

** 인터넷 HTTP 통신을 위해 프록시 서버를 사용하지 않고 커넥터를 구성해야 합니다 *. 커넥터에 대해 HTTP 프록시 서버를 구성한 경우 검색 및 복원 기능을 사용할 수 없습니다.




endif::azure[]

ifdef::gcp[]

* Google Cloud 요구사항:
+
** BlueXP에 권한을 제공하는 사용자 역할에 특정 Google BigQuery 권한을 추가해야 합니다. link:prev-ontap-backup-onprem-gcp.html["모든 권한이 올바르게 구성되었는지 확인합니다"]..
+
과거에 구성한 커넥터로 BlueXP backup and recovery 이미 사용 중이었다면 지금 BlueXP 사용자 역할에 BigQuery 권한을 추가해야 합니다. 검색 및 복원에 필요합니다.





endif::gcp[]

* StorageGRID 및 ONTAP S3 요구사항:
+
구성에 따라 검색 및 복원을 구현하는 방법에는 두 가지가 있습니다.

+
** 계정에 클라우드 공급자 자격 증명이 없으면 인덱싱된 카탈로그 정보가 Connector에 저장됩니다.
+
인덱싱된 카탈로그 v2에 대한 자세한 내용은 인덱싱된 카탈로그를 사용하는 방법에 대한 아래 섹션을 참조하십시오.

** 비공개(다크) 사이트에서 Connector를 사용하는 경우 인덱싱된 카탈로그 정보가 Connector에 저장됩니다(Connector 버전 3.9.25 이상 필요).
** 있는 경우 https://docs.netapp.com/us-en/bluexp-setup-admin/concept-accounts-aws.html["AWS 자격 증명"^] 또는 https://docs.netapp.com/us-en/bluexp-setup-admin/concept-accounts-azure.html["Azure 자격 증명"^] 어카운트의 경우 인덱싱된 카탈로그는 클라우드에 구축된 Connector와 마찬가지로 클라우드 공급자에 저장됩니다. (두 자격 증명이 모두 있는 경우 기본적으로 AWS가 선택됩니다.)
+
온-프레미스 Connector를 사용하는 경우에도 Connector 사용 권한과 클라우드 공급자 리소스 모두에 대해 클라우드 공급자 요구 사항이 충족되어야 합니다. 이 구축을 사용할 때는 위의 AWS 및 Azure 요구사항을 참조하십시오.







=== 검색 및 복원 프로세스

프로세스는 다음과 같습니다.

. 검색 및 복원을 사용하려면 볼륨 데이터를 복원할 각 소스 작업 환경에서 "인덱싱"을 활성화해야 합니다. 따라서 인덱싱된 카탈로그를 통해 모든 볼륨의 백업 파일을 추적할 수 있습니다.
. 볼륨 백업에서 볼륨이나 파일을 복원하려면 _검색 및 복원_에서 *검색 및 복원*을 선택합니다.
. 볼륨, 폴더 또는 파일에 대한 검색 기준을 부분 또는 전체 볼륨 이름, 부분 또는 전체 파일 이름, 백업 위치, 크기 범위, 생성 날짜 범위, 기타 검색 필터로 입력하고 *검색*을 선택합니다.
+
검색 결과 페이지에는 검색 기준과 일치하는 파일 또는 볼륨이 있는 모든 위치가 표시됩니다.

. 볼륨이나 파일을 복원할 위치에 대해 *모든 백업 보기*를 선택한 다음, 사용하려는 실제 백업 파일에서 *복원*을 선택합니다.
. 볼륨, 폴더 또는 파일을 복원할 위치를 선택하고 *복원*을 선택합니다.
. 볼륨, 폴더 또는 파일이 복원됩니다.


image:diagram_search_restore_vol_file.png["검색 및 앰프, 복원을 사용하여 볼륨, 폴더 또는 파일 복원 작업을 수행하는 흐름을 보여 주는 다이어그램"]

보시다시피, 검색 조건과 일치하는 모든 백업 파일을 통해 부분 이름을 알고 BlueXP 백업 및 복구 검색을 수행하면 됩니다.



=== 각 작업 환경에 대해 인덱싱된 카탈로그를 설정합니다

검색 및 복원을 사용하려면 볼륨 또는 파일을 복원할 각 소스 작업 환경에서 "인덱싱"을 활성화해야 합니다. 따라서 인덱싱된 카탈로그를 통해 모든 볼륨과 모든 백업 파일을 추적할 수 있어 검색이 매우 빠르고 효율적입니다.

인덱싱된 카탈로그는 작업 환경의 모든 볼륨 및 백업 파일에 대한 메타데이터를 저장하는 데이터베이스입니다. 검색 및 복원 기능에서 복원하려는 데이터가 포함된 백업 파일을 빠르게 찾는 데 사용됩니다.

.인덱싱된 카탈로그 v2 기능
2025년 2월에 출시되고 2025년 6월에 업데이트된 색인 카탈로그 v2에는 카탈로그를 더 효율적이고 사용하기 쉽게 만드는 기능이 포함되어 있습니다. 이 버전은 성능이 크게 향상되었으며 모든 신규 고객에게 기본적으로 사용됩니다.

v2와 관련하여 다음 고려 사항을 검토하십시오.

* 인덱스 카탈로그 v2는 미리 보기 모드에서 사용할 수 있습니다.
* 기존 고객이며 Catalog v2를 사용하려면 환경을 완전히 다시 인덱싱해야 합니다.
* Catalog v2는 스냅샷 레이블이 있는 스냅샷만 인덱싱합니다.
* BlueXP  백업 및 복구는 "시간별" SnapMirror 레이블을 사용하여 스냅샷을 인덱싱하지 않습니다. "시간별" SnapMirror 레이블을 사용하여 스냅샷을 인덱싱하려면 v2가 미리보기 모드에 있는 동안 스냅샷을 수동으로 활성화해야 합니다.
* BlueXP  백업 및 복구는 카탈로그 v2를 통해서만 BlueXP  백업 및 복구로 보호되는 작업 환경과 관련된 볼륨 및 스냅숏을 인덱싱합니다. BlueXP  플랫폼에서 검색된 다른 작업 환경은 인덱싱되지 않습니다.
* Catalog v2를 사용한 데이터 인덱싱은 온프레미스 환경과 Amazon Web Services, Microsoft Azure, Google Cloud Platform(GCP) 환경에서 수행됩니다.


인덱싱된 카탈로그 v2는 다음을 지원합니다.

* 3분 이내에 글로벌 검색 효율성 향상
* 최대 50억 개의 파일
* 클러스터당 최대 5000개의 볼륨
* 볼륨당 최대 100,000개의 스냅샷 지원
* 기준 색인에 대한 최대 시간은 7일 미만입니다. 실제 시간은 환경에 따라 다릅니다.


.작업 환경에 대해 인덱싱된 카탈로그를 사용하도록 설정합니다
Indexed Catalog v2를 사용할 때 이 서비스는 별도의 버킷을 프로비저닝하지 않습니다. 대신 AWS, Azure, Google Cloud Platform, StorageGRID 또는 ONTAP S3에 저장된 백업의 경우, 이 서비스는 커넥터 또는 클라우드 공급자 환경에 공간을 프로비저닝합니다.

v2 릴리스 이전에 인덱싱된 카탈로그를 활성화한 경우 작업 환경에서 다음이 발생합니다.

* AWS에 저장된 백업의 경우 새로운 S3 버킷과 을 프로비저닝합니다 https://aws.amazon.com/athena/faqs/["아마존 Athena 대화형 쿼리 서비스"^] 및 https://aws.amazon.com/glue/faqs/["AWS Glue 서버리스 데이터 통합 서비스"^].
* Azure에 저장된 백업의 경우 Azure Synapse 작업 공간과 Data Lake 파일 시스템을 작업 공간 데이터를 저장할 컨테이너로 프로비저닝합니다.
* Google Cloud에 저장된 백업의 경우 IT 부서는 새로운 버킷과 을 프로비저닝합니다 https://cloud.google.com/bigquery["Google Cloud BigQuery 서비스"^] 계정/프로젝트 수준에서 프로비저닝됩니다.
* StorageGRID 또는 ONTAP S3에 저장된 백업의 경우 커넥터 또는 클라우드 공급자 환경에서 공간을 프로비저닝합니다.


작업 환경에 대해 인덱싱이 이미 활성화되어 있는 경우 다음 섹션으로 이동하여 데이터를 복원합니다.

.작업 환경에 대해 인덱싱을 활성화하는 단계:
. 다음 중 하나를 수행합니다.
+
** 인덱싱된 작업 환경이 없는 경우 복원 대시보드의 _Search & Restore_ 아래에서 * 작업 환경에 대한 인덱싱 활성화 * 를 선택합니다.
** 하나 이상의 작업 환경이 이미 인덱싱된 경우, _검색 및 복원_ 아래의 복원 대시보드에서 *인덱싱 설정*을 선택하세요.


. 작업 환경에 대해 * 인덱싱 활성화 * 를 선택합니다.


.결과
모든 서비스가 프로비저닝되고 인덱싱된 카탈로그가 활성화되면 작업 환경이 "활성"으로 표시됩니다.

작업 환경의 볼륨 크기와 3개의 백업 위치 모두에 있는 백업 파일 수에 따라 초기 인덱싱 프로세스에 최대 1시간이 걸릴 수 있습니다. 그 이후에는 운영 환경에 영향을 미치지 않고 매시간 업데이트되며, 지속적으로 변경될 수 있습니다.



=== 검색 및 amp;Restore를 사용하여 볼륨, 폴더 및 파일을 복원합니다

먼저 해 <<enable-the-indexed-catalog-for-each-working-environment,작업 환경에 대한 인덱싱 기능을 활성화했습니다>>검색 및 복원을 사용하여 볼륨, 폴더 및 파일을 복원할 수 있습니다. 이를 통해 광범위한 필터를 사용하여 모든 백업 파일에서 복원하려는 정확한 파일 또는 볼륨을 찾을 수 있습니다.

.단계
. BlueXP 메뉴에서 * 보호 > 백업 및 복구 * 를 선택합니다.
. *복원* 탭을 선택하면 복원 대시보드가 표시됩니다.
. _검색 및 복원_ 섹션에서 *검색 및 복원*을 선택합니다.
. _검색 및 복원_ 섹션에서 *검색 및 복원*을 선택합니다.
+
image:screenshot_restore_dashboard.png["Browse  amp; Restore 또는 Search  amp; Restore 기능을 사용할 수 있는 옵션이 표시된 Restore Dashboard입니다."]

. 검색 및 복원 페이지에서 다음을 수행합니다.
+
.. 검색 표시줄 _ 에서 전체 또는 부분 볼륨 이름, 폴더 이름 또는 파일 이름을 입력합니다.
.. 리소스 유형 * 볼륨 *, * 파일 *, * 폴더 * 또는 * 모두 * 를 선택합니다.
.. Filter by_영역에서 필터 기준을 선택합니다. 예를 들어 데이터가 있는 작업 환경과 파일 형식(예: .jpeg 파일)을 선택할 수 있습니다. 또는 오브젝트 스토리지에서 사용 가능한 스냅샷 복사본 또는 백업 파일 내에서만 결과를 검색하려면 백업 위치 유형을 선택할 수 있습니다.


. *검색*을 선택하면 검색 결과 영역에 검색 조건에 맞는 파일, 폴더 또는 볼륨이 있는 모든 리소스가 표시됩니다.
. 복원하려는 데이터가 있는 리소스를 찾은 다음 *모든 백업 보기*를 선택하면 일치하는 볼륨, 폴더 또는 파일이 포함된 모든 백업 파일이 표시됩니다.
. 데이터를 복원하는 데 사용할 백업 파일을 찾아 *복원*을 선택합니다.
+
결과는 로컬 볼륨 스냅샷 복사본과 검색에 파일이 포함된 원격 복제 볼륨을 식별합니다. 클라우드 백업 파일, 스냅샷 복사본 또는 복제된 볼륨에서 복원을 선택할 수 있습니다.

. 볼륨, 폴더 또는 파일을 복원할 대상 위치를 선택하고 *복원*을 선택합니다.
+
** 볼륨의 경우 원래 대상 작업 환경을 선택하거나 대체 작업 환경을 선택할 수 있습니다. FlexGroup 볼륨을 복원할 때 여러 애그리게이트를 선택해야 합니다.
** 폴더의 경우 원래 위치로 복원하거나 작업 환경, 볼륨 및 폴더를 포함한 대체 위치를 선택할 수 있습니다.
** 파일의 경우 원래 위치로 복원하거나 작업 환경, 볼륨 및 폴더를 포함한 대체 위치를 선택할 수 있습니다. 원본 위치를 선택할 때 원본 파일을 덮어쓰거나 새 파일을 만들도록 선택할 수 있습니다.
+
사내 ONTAP 시스템을 선택하고 오브젝트 스토리지에 대한 클러스터 연결을 아직 구성하지 않은 경우 추가 정보를 묻는 메시지가 표시됩니다.

+
ifdef::aws[]

+
*** Amazon S3에서 복원할 때 대상 볼륨이 상주할 ONTAP 클러스터에서 IPspace를 선택하고 ONTAP 클러스터에 S3 버킷에 대한 액세스 권한을 부여하기 위해 생성한 사용자의 액세스 키 및 암호 키를 입력합니다. 그리고 데이터 전송 보안을 위해 프라이빗 VPC 엔드포인트를 선택할 수도 있습니다. link:prev-ontap-backup-onprem-aws.html["이러한 요구 사항에 대한 자세한 내용을 참조하십시오"]..






endif::aws[]

ifdef::azure[]

* Azure Blob에서 복구할 경우 대상 볼륨이 상주할 ONTAP 클러스터에서 IPspace를 선택하고 VNET 및 서브넷을 선택하여 보안 데이터 전송을 위한 프라이빗 엔드포인트를 선택할 수도 있습니다. link:prev-ontap-backup-onprem-azure.html["이러한 요구 사항에 대한 자세한 내용을 참조하십시오"]..


endif::azure[]

ifdef::gcp[]

* Google 클라우드 스토리지에서 복원할 때 대상 볼륨이 상주할 ONTAP 클러스터에서 IPspace를 선택하고 액세스 키 및 비밀 키를 선택하여 오브젝트 스토리지에 액세스합니다. link:prev-ontap-backup-onprem-gcp.html["이러한 요구 사항에 대한 자세한 내용을 참조하십시오"]..


endif::gcp[]

* StorageGRID에서 복구할 때 StorageGRID 서버의 FQDN과 ONTAP이 StorageGRID과의 HTTPS 통신에 사용해야 하는 포트를 입력하고, 오브젝트 스토리지에 액세스하는 데 필요한 액세스 키 및 비밀 키, 대상 볼륨이 있는 ONTAP 클러스터의 IPspace를 입력합니다. link:prev-ontap-backup-onprem-storagegrid.html["이러한 요구 사항에 대한 자세한 내용을 참조하십시오"]..
* ONTAP S3에서 복원하는 경우 ONTAP S3 서버의 FQDN과 ONTAP가 ONTAP S3와의 HTTPS 통신에 사용해야 하는 포트를 입력하고 오브젝트 스토리지에 액세스하는 데 필요한 액세스 키 및 암호 키를 선택합니다. 및 대상 볼륨이 상주할 ONTAP 클러스터의 IPspace입니다. link:prev-ontap-backup-onprem-ontaps3.html["이러한 요구 사항에 대한 자세한 내용을 참조하십시오"]..


.결과
볼륨, 폴더 또는 파일이 복원되고 복구 작업의 진행률을 검토할 수 있도록 복구 대시보드로 돌아갑니다. *작업 모니터링* 탭을 선택하여 복원 진행 상황을 확인할 수도 있습니다. 을 link:br-use-monitor-tasks.html["작업 모니터 페이지"]참조하십시오.
