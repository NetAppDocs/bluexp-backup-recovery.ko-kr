---
sidebar: sidebar 
permalink: task-backup-cloud-native-sap-hana-data.html 
keywords: cloud native, application data, back up, policy, pre-canned policies, scheduled backups, on-demand backups, cloud manager, BlueXP, add hosts, create policy, SAP HANA Database 
summary: SAP HANA 데이터베이스의 예약된 백업 또는 온디맨드 백업을 생성합니다. 
---
= 클라우드 네이티브 SAP HANA 데이터베이스 백업
:hardbreaks:
:allow-uri-read: 
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ./media/


[role="lead"]
SAP HANA 데이터베이스의 백업을 생성하기 전에 SAP HANA 데이터베이스 호스트를 추가하고 미리 생성된 정책 또는 정책을 할당해야 합니다.



== SAP HANA 데이터베이스 호스트를 추가합니다

정책을 할당하고 백업을 생성하려면 SAP HANA 데이터베이스 호스트를 수동으로 추가해야 합니다. SAP HANA 데이터베이스 호스트에 대한 자동 검색은 지원되지 않습니다.

* 필요한 것 *

* 작업 환경을 추가하고 Connector를 만들어야 합니다.
* 커넥터가 작업 환경에 연결되어 있는지 확인합니다
* BlueXP 사용자에게 "계정 관리자" 역할이 있는지 확인합니다.
* SAP HANA용 SnapCenter 플러그인을 구축해야 합니다. link:task-deploy-snapcenter-plugin-for-sap-hana.html["자세한 정보"]
* SAP HANA 데이터베이스 호스트를 추가하는 동안 HDB 사용자 저장소 키를 추가해야 합니다. HDB 보안 사용자 저장소 키는 SAP HANA 데이터베이스 호스트의 연결 정보를 클라이언트에 안전하게 저장하는 데 사용되며 HDBSQL 클라이언트는 보안 사용자 저장소 키를 사용하여 SAP HANA 데이터베이스 호스트에 연결합니다.
* HANA 시스템 복제(HSR)의 경우 HANA 시스템을 보호하려면 운영 및 보조 HANA 시스템을 모두 수동으로 등록해야 합니다.


* 단계 *

. BlueXP * UI에서 * 보호 * > * 백업 및 복구 * > * 응용 프로그램 * 을 클릭합니다.
. 응용 프로그램 검색 * 을 클릭합니다.
. Cloud Native * > * SAP HANA * 를 선택하고 * Next * 를 클릭합니다.
. 응용 프로그램 * 페이지에서 * 시스템 추가 * 를 클릭합니다.
. 시스템 세부 정보 * 페이지에서 다음 작업을 수행합니다.
+
.. 시스템 유형을 다중 테넌트 데이터베이스 컨테이너 또는 단일 컨테이너로 선택합니다.
.. SAP HANA 시스템 이름을 입력합니다.
.. SAP HANA 시스템의 SID를 지정합니다.
.. (선택 사항) HDBSQL OS 사용자를 지정합니다.
.. 플러그인 호스트 를 선택합니다. (선택 사항) 호스트가 추가되지 않았거나 여러 호스트를 추가하려는 경우 * 플러그인 호스트 추가 * 를 클릭합니다.
.. HANA 시스템이 HANA 시스템 복제로 구성된 경우 * HSR(HANA 시스템 복제) 시스템 * 을 활성화합니다.
.. HDB 보안 사용자 저장소 키 * 텍스트 상자를 클릭하여 사용자 저장소 키 세부 정보를 추가합니다.
+
키 이름, 시스템 세부 정보, 사용자 이름 및 암호를 지정하고 * 키 추가 * 를 클릭합니다.

+
사용자 저장소 키를 삭제하거나 수정할 수 있습니다.



. 다음 * 을 클릭합니다.
. Storage Footprint * 페이지에서 * 스토리지 추가 * 를 클릭하고 다음을 수행합니다.
+
.. 작업 환경을 선택하고 NetApp 계정을 지정합니다.
+
Canvas * 페이지로 이동하여 새 작업 환경을 추가합니다

.. 필요한 볼륨을 선택합니다.
.. 스토리지 추가 * 를 클릭합니다.


. 모든 세부 정보를 검토하고 * 시스템 추가 * 를 클릭합니다.



NOTE: 특정 호스트를 보기 위한 필터가 작동하지 않습니다. 필터에 호스트 이름을 지정하면 모든 호스트가 표시됩니다

REST API를 사용하여 SAP HANA 시스템을 수정 및 제거할 수 있습니다. HANA 시스템을 제거하기 전에 관련된 모든 백업을 삭제하고 보호를 제거해야 합니다.



== 비 데이터 볼륨 추가

멀티 테넌트 데이터베이스 컨테이너 또는 단일 컨테이너 유형 SAP HANA 시스템을 추가한 후 HANA 시스템의 비 데이터 볼륨을 추가할 수 있습니다.

* 단계 *

. BlueXP * UI에서 * 보호 * > * 백업 및 복구 * > * 응용 프로그램 * 을 클릭합니다.
. 응용 프로그램 검색 * 을 클릭합니다.
. Cloud Native * > * SAP HANA * 를 선택하고 * Next * 를 클릭합니다.
. 응용 프로그램 * 페이지에서 을 클릭합니다 image:icon-action.png["아이콘을 클릭하여 작업을 선택합니다"] 비 데이터 볼륨을 추가하려는 시스템에 해당하는 * 시스템 관리 * > * 비 데이터 볼륨 * 을 선택합니다.




== 글로벌 비 데이터 볼륨 추가

멀티 테넌트 데이터베이스 컨테이너 또는 단일 컨테이너 유형 SAP HANA 시스템을 추가한 후 HANA 시스템의 글로벌 비 데이터 볼륨을 추가할 수 있습니다.

* 단계 *

. BlueXP * UI에서 * 보호 * > * 백업 및 복구 * > * 응용 프로그램 * 을 클릭합니다.
. 응용 프로그램 검색 * 을 클릭합니다.
. Cloud Native * > * SAP HANA * 를 선택하고 * Next * 를 클릭합니다.
. 응용 프로그램 * 페이지에서 * 시스템 추가 * 를 클릭합니다.
. 시스템 세부 정보 * 페이지에서 다음 작업을 수행합니다.
+
.. 시스템 유형 드롭다운에서 * 글로벌 비 데이터 볼륨 * 을 선택합니다.
.. SAP HANA 시스템 이름을 입력합니다.
.. SAP HANA 시스템의 관련 SID를 지정합니다.
.. 플러그인 호스트를 선택합니다
+
(선택 사항) 여러 호스트를 추가하려면 * 플러그인 호스트 추가 * 를 클릭하고 호스트 이름과 포트를 지정한 다음 * 호스트 추가 * 를 클릭합니다.

.. 다음 * 을 클릭합니다.
.. 모든 세부 정보를 검토하고 * 시스템 추가 * 를 클릭합니다.






== 사전 스크립트 및 포스트스크립트

정책을 생성하는 동안 처방자, postscript 및 종료 스크립트를 제공할 수 있습니다. 이러한 스크립트는 백업을 생성하는 동안 HANA 호스트에서 실행됩니다.

스크립트에 대해 지원되는 형식은 .sh, python 스크립트, perl 스크립트 등이 있습니다.

prescpt 및 PostScript는 호스트 관리자가 에 등록해야 합니다 `/opt/NetApp/snapcenter/scc/etc/allowed_commands.config file`

`[root@scspa2622265001 etc]# cat allowed_commands.config
command: mount
command: umount
command: /mnt/scripts/pre_script.sh
command: /mnt/scripts/post_script.sh`



== 환경 변수

복원 워크플로의 경우 다음 환경 변수를 처방과 PS의 일부로 사용할 수 있습니다.

|===
| 환경 변수 | 설명 


 a| 
SID
 a| 
복원을 위해 선택한 HANA 데이터베이스의 시스템 식별자입니다



 a| 
백업 이름
 a| 
복원 작업에 대해 선택한 백업 이름입니다



 a| 
UserStoreKeyNames를 참조하십시오
 a| 
HANA 데이터베이스용 사용자 저장소 키를 구성했습니다



 a| 
OSDBUser
 a| 
HANA 데이터베이스에 대해 OSDBUser를 구성했습니다



 a| 
정책 이름
 a| 
예약된 백업 전용입니다



 a| 
schedule_type입니다
 a| 
예약된 백업 전용입니다

|===


== SAP HANA 데이터베이스 보호를 위한 정책 생성

사전 구성된 정책을 사용하거나 편집하지 않으려는 경우 정책을 생성할 수 있습니다.

. 응용 프로그램 * 페이지의 설정 드롭다운 목록에서 * 정책 * 을 선택합니다.
. Create policy * 를 클릭합니다.
. 정책 이름을 지정합니다.
. (선택 사항) 스냅샷 복사본 이름의 형식을 편집합니다.
. 정책 유형을 선택합니다.
. 스케줄 및 보존 세부 정보를 지정합니다.
. (선택 사항) 스크립트를 지정합니다.
. Create * 를 클릭합니다.




== SAP HANA 데이터베이스의 백업을 생성합니다

미리 구성된 정책을 할당하거나 정책을 생성한 다음 데이터베이스에 할당할 수 있습니다. 정책이 할당되면 정책에 정의된 일정에 따라 백업이 생성됩니다.

* 이 작업에 대한 정보 *

HANA 시스템 복제(HSR)의 경우 예약된 백업 작업이 운영 HANA 시스템에만 대해 트리거되고 시스템이 보조 HANA 시스템으로 페일오버되면 기존 스케줄이 현재 운영 HANA 시스템에 대한 백업을 트리거합니다. 정책이 두 HANA 시스템에 모두 할당되지 않은 경우 페일오버 후 일정이 실패합니다.

HSR 시스템에 서로 다른 정책이 할당된 경우 예약된 백업이 두 시스템에 대해 트리거되고 보조 HANA 시스템에 대한 백업이 실패합니다.

* 단계 *

. 응용 프로그램 페이지에서 정책을 사용하여 데이터베이스가 보호되지 않는 경우 * 정책 할당 * 을 클릭합니다.
+
하나 이상의 정책을 사용하여 데이터베이스를 보호하는 경우 를 클릭하여 더 많은 정책을 할당할 수 있습니다 image:icon-action.png["아이콘을 클릭하여 작업을 선택합니다"] > * 정책 할당 *.

. 정책을 선택하고 * Assign * 을 클릭합니다.
+
백업은 정책에 정의된 일정에 따라 생성됩니다.

+

NOTE: 서비스 계정(_SnapCenter-account-<account_id>_)은 예약된 백업 작업을 실행하는 데 사용됩니다.





== SAP HANA 데이터베이스의 온디맨드 백업 생성

정책을 할당한 후 애플리케이션의 필요 시 백업을 생성할 수 있습니다.

* 단계 *

. 응용 프로그램 * 페이지에서 을 클릭합니다 image:icon-action.png["아이콘을 클릭하여 작업을 선택합니다"] 응용 프로그램에 해당하는 을 클릭하고 * On-Demand Backup * 을 클릭합니다.
. 필요 시 백업 유형을 선택합니다.
. 정책 기반 백업의 경우 정책, 보존 계층을 선택한 다음 * 백업 생성 * 을 클릭합니다.
. 한 번 스냅샷 복사본 기반 또는 파일 기반 을 선택합니다. 다음 단계를 수행합니다.
+
.. 보존 값을 선택하고 백업 이름을 지정합니다.
.. (선택 사항) 스크립트의 스크립트 및 경로를 지정합니다.
.. 백업 생성 * 을 클릭합니다.



