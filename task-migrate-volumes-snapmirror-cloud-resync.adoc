---
sidebar: sidebar 
permalink: task-migrate-volumes-snapmirror-cloud-resync.html 
keywords: backing up, back up, backup, backup on-prem ontap, on-premises, back up volumes, cloud backup, cloud, snapmirror, migrate, volume migration, resync, 
summary: 몇 가지 단계를 완료하여 사내 ONTAP 시스템에서 보조 스토리지 시스템 및 Google 클라우드 스토리지로 볼륨 데이터 백업을 시작하십시오. 
---
= SnapMirror를 사용하여 BlueXP 백업 및 복구로 볼륨을 Cloud Resync로 마이그레이션
:allow-uri-read: 


[role="lead"]
BlueXP 백업 및 복구의 SnapMirror to Cloud Resync 기능은 NetApp 환경에서 볼륨 마이그레이션 중에 데이터 보호와 연속성을 간소화합니다. SnapMirror LRSE(논리적 복제)를 사용하여 온프레미스 NetApp 구축에서 다른 구축으로 또는 Cloud Volumes ONTAP 또는 Cloud Volumes Service와 같은 클라우드 기반 솔루션으로 볼륨을 마이그레이션한 경우, SnapMirror에서 클라우드 재동기화는 기존 클라우드 백업이 그대로 유지되고 작동되도록 보장합니다.

이 기능을 사용하면 시간이 오래 걸리고 리소스 소모가 많은 기준선 변경 작업이 필요하지 않으므로 백업 작업이 마이그레이션 후 작업을 계속할 수 있습니다. 이 기능은 워크로드 마이그레이션 시나리오에 유용하며 FlexVols와 FlexGroups를 모두 지원하며 ONTAP 버전 9.16.1부터 사용할 수 있습니다.

SnapMirror to Cloud Resync는 환경 간 백업 연속성을 유지함으로써 운영 효율성을 개선하고 하이브리드 및 멀티 클라우드 데이터 관리의 복잡성을 줄일 수 있습니다.



== BlueXP  백업 및 복구 SnapMirror를 클라우드로 재동기화하는 방법

기술 업데이트를 완료하거나 ONTAP 클러스터 간에 볼륨을 마이그레이션할 경우 백업이 중단 없이 계속 작동해야 합니다. BlueXP  백업 및 복구 SnapMirror to Cloud Resync는 볼륨 마이그레이션 후에도 클라우드 백업의 정합성을 보장함으로써 이러한 문제를 해결하는 데 도움이 됩니다.

예를 들면 다음과 같습니다.

Vol1a라는 온프레미스 볼륨이 있다고 가정해 보겠습니다. 이 볼륨에는 S1, S2, S3의 세 가지 스냅샷이 있습니다. 이러한 스냅샷은 복원 지점과 비슷합니다. VOL1은 SM-C(SnapMirror to Cloud)를 사용하여 이미 클라우드 오브젝트 저장소 엔드포인트에 백업되고 있습니다. 하지만 현재까지 S1 및 S2만 객체 저장소에 백업되었습니다.

이제 Vol1을 다른 ONTAP 클러스터로 마이그레이션하려고 합니다. 이렇게 하려면 Vol1b라는 새 클라우드 볼륨에 대한 SnapMirror 논리적 복제(LRSE) 관계를 생성합니다. 그러면 세 개의 스냅샷(S1, S2 및 S3)이 모두 Vol1a에서 Vol1b로 전송됩니다.

마이그레이션이 완료되면 다음과 같은 설정을 할 수 있습니다.

* 원래 SM-C 관계(Vol1a → Object store)가 삭제됩니다.
* LRSE 관계(Vol1a → Vol1b)도 삭제됩니다.
* 이제 Vol1b가 활성 볼륨입니다.


이때 Vol1b를 동일한 클라우드 끝점에 계속 백업하려고 합니다. 하지만 시간과 리소스가 소모되는 전체 백업을 완전히 처음부터 시작하는 대신 SnapMirror to Cloud Resync를 사용할 수 있습니다.

재동기화는 다음과 같이 작동합니다.

* 시스템에서 Vol1a와 객체 저장소 간의 공통 스냅샷을 확인합니다. 이 경우 둘 다 S2를 사용합니다.
* 이 공유 스냅샷으로 인해 시스템에서 S2와 S3 간의 증분 변경 사항만 전송하면 됩니다.


즉, S2 이후에 추가된 새 데이터만 전체 볼륨이 아닌 개체 저장소로 전송됩니다.

이 프로세스는 이미 백업된 데이터를 다시 전송하는 것을 방지하고 대역폭을 절약하며 마이그레이션 후 백업 체인이 원활하게 계속되도록 보장합니다.

image:diagram-snapmirror-cloud-resync-migration.png["BlueXP  백업 및 복구 SnapMirror를 클라우드로 재동기화"]



== 절차 참고 사항

* 대상 ONTAP 클러스터에서 ONTAP 버전 9.16.1 이상을 실행해야 합니다.
* 이전 소스 ONTAP 클러스터는 BlueXP  백업 및 복구를 사용하여 보호되어야 합니다.
* 마이그레이션 및 기술 업데이트는 BlueXP  백업 및 복구를 사용하여 수행되지 않습니다. 이러한 작업은 전문 서비스 팀 또는 자격을 갖춘 스토리지 관리자가 수행해야 합니다.
* NetApp 마이그레이션 팀은 볼륨 마이그레이션을 용이하게 하기 위해 소스 및 대상 ONTAP 클러스터 간에 SnapMirror 관계를 생성하는 일을 담당합니다.
* 기술 업데이트 중 마이그레이션이 SnapMirror 기반 마이그레이션을 기반하도록 합니다.
* SVM-마이그레이션, SVM-DR 또는 헤드 스왑 방법을 사용하여 마이그레이션 후 SnapMirror-클라우드 재동기화 는 현재 지원되지 않습니다.




== SnapMirror를 사용하여 볼륨을 클라우드 재동기화로 마이그레이션하는 방법

SnapMirror를 사용하여 볼륨을 클라우드 재동기화로 마이그레이션하는 작업에는 다음과 같은 주요 단계가 포함됩니다. 각 단계는 아래에서 자세히 설명합니다.

* * 마이그레이션 전 체크리스트 준수 *: 마이그레이션을 시작하기 전에 NetApp 기술 업데이트 팀은 데이터 손실을 방지하고 원활한 마이그레이션 프로세스를 보장하기 위해 다음과 같은 사전 요구 사항을 충족해야 합니다.
* * 마이그레이션 후 체크리스트 준수 *: 마이그레이션 후 NetApp 기술 업데이트 팀은 다음 단계를 완료하여 보호를 설정하고 재동기화를 준비합니다.
* * SnapMirror to Cloud 재동기화 수행 *: 마이그레이션 후 NetApp 기술 업데이트 팀이 SnapMirror to Cloud 재동기화 작업을 수행하여 새로 마이그레이션된 볼륨에서 클라우드 백업을 다시 시작합니다.


image:diagram-snapmirror-cloud-resync-migration-steps.png["SnapMirror를 사용하여 볼륨을 클라우드 재동기화로 마이그레이션하는 단계"]



=== 마이그레이션 전 체크리스트를 따르십시오

마이그레이션을 시작하기 전에 NetApp 기술 업데이트 팀은 데이터 손실을 방지하고 원활한 마이그레이션 프로세스를 보장하기 위해 다음과 같은 사전 요구 사항을 충족해야 합니다.

. 마이그레이션할 모든 볼륨이 BlueXP  백업 및 복구를 사용하여 보호되는지 확인합니다.
. 볼륨 인스턴스 UUID를 기록합니다. 마이그레이션을 시작하기 전에 모든 볼륨의 인스턴스 UUID를 기록합니다. 이러한 식별자는 나중에 매핑 및 재동기화 작업을 수행하는 데 중요합니다.
. SnapMirror 관계를 삭제하기 전에 각 볼륨의 최종 스냅샷을 생성하여 최신 상태를 유지합니다.
. SnapMirror 정책을 문서화합니다. 각 볼륨의 관계에 현재 연결된 SnapMirror 정책을 기록합니다. 이 작업은 나중에 SnapMirror to Cloud 재동기화 프로세스 중에 필요합니다.
. 오브젝트 저장소와의 SnapMirror 클라우드 관계를 삭제합니다.
. 새 ONTAP 클러스터와 표준 SnapMirror 관계를 생성하여 볼륨을 새 타겟 ONTAP 클러스터로 마이그레이션합니다.




=== 마이그레이션 후 체크리스트를 따르십시오

마이그레이션 후 NetApp 기술 업데이트 팀은 다음 단계를 완료하여 보호를 설정하고 재동기화를 준비합니다.

. 대상 ONTAP 클러스터에 마이그레이션된 모든 볼륨의 새 볼륨 인스턴스 UUID를 기록합니다.
. 이전 ONTAP 클러스터에서 사용되던 필수 SnapMirror 정책이 모두 새 ONTAP 클러스터에 올바르게 구성되었는지 확인합니다.
. 새 ONTAP 클러스터를 BlueXP  캔버스에 작업 환경으로 추가합니다.




=== SnapMirror와 클라우드 간 재동기화를 수행합니다

마이그레이션 후 NetApp 기술 업데이트 팀은 SnapMirror to Cloud 재동기화 작업을 수행하여 새로 마이그레이션된 볼륨에서 클라우드 백업을 다시 시작합니다.

. 새 ONTAP 클러스터를 BlueXP  캔버스에 작업 환경으로 추가합니다.
. BlueXP  백업 및 복구 볼륨 페이지에서 이전 소스 작업 환경 세부 정보를 사용할 수 있는지 확인합니다.
. BlueXP  백업 및 복구 볼륨 페이지에서 * 백업 설정 * 을 선택합니다.
. 메뉴에서 * 백업 재동기화 * 를 선택합니다.
. 작업 환경 다시 동기화 페이지에서 다음을 실행합니다.
+
.. * 새 소스 작업 환경 *: 볼륨이 마이그레이션된 새 ONTAP 클러스터를 입력합니다.
.. * 기존 대상 개체 저장소 *: 이전 소스 작업 환경의 백업이 포함된 대상 개체 저장소를 선택합니다.


. CSV 템플릿 다운로드 * 를 선택하여 재동기화 세부 정보 Excel 시트를 다운로드합니다. 이 시트를 사용하여 마이그레이션할 볼륨의 세부 정보를 입력합니다. CSV 파일에 다음 세부 정보를 입력합니다.
+
** 소스 클러스터의 이전 볼륨 인스턴스 UUID
** 대상 클러스터의 새 볼륨 인스턴스 UUID
** 새로운 관계에 적용할 SnapMirror 정책입니다.


. 완료된 CSV 시트를 BlueXP  백업 및 복구 UI에 업로드하려면 * 볼륨 매핑 세부 정보 업로드 * 아래에서 * 업로드 * 를 선택합니다.
. 재동기화 작업에 필요한 공급자 및 네트워크 구성 정보를 입력합니다.
. 확인 프로세스를 시작하려면 * 제출 * 을 선택하십시오.
+
BlueXP  백업 및 복구는 재동기화를 위해 선택한 각 볼륨에 하나 이상의 공통 스냅샷이 있는지 확인합니다. 이렇게 하면 SnapMirror to Cloud 재동기화 작업에 볼륨을 사용할 수 있습니다.

. 새 소스 볼륨 이름 및 각 볼륨에 대한 재동기화 상태를 포함한 검증 결과를 검토합니다.
. 볼륨 적합성을 확인합니다. 시스템에서 볼륨을 재동기화할 수 있는지 확인합니다. 볼륨이 적합하지 않으면 공통 스냅샷을 찾을 수 없는 것입니다.
+

IMPORTANT: 볼륨이 SnapMirror-Cloud 재동기화 작업을 수행할 수 있는 자격을 유지하려면 마이그레이션 전 단계에서 SnapMirror 관계를 삭제하기 전에 각 볼륨의 최종 스냅샷을 생성하십시오. 이렇게 하면 데이터의 최신 상태가 유지됩니다.

. 재동기화 작업을 시작하려면 * 재동기화 * 를 선택합니다. 시스템은 공통 스냅샷을 사용하여 증가분 변경 사항만 전송하므로 백업 연속성이 보장됩니다.
. 작업 모니터 페이지에서 resyn 프로세스를 모니터링합니다.

