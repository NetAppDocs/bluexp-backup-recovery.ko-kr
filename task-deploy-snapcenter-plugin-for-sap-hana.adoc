---
sidebar: sidebar 
permalink: task-deploy-snapcenter-plugin-for-sap-hana.html 
keywords: Cloud Manager, BlueXP, SnapCenter Plug-in for SAP HANA, SAP HANA, database, host, deploy 
summary: 각 SAP HANA 데이터베이스 호스트에 SAP HNAN용 SnapCenter 플러그인을 구축합니다. 
---
= SAP HANA용 SnapCenter 플러그인을 구축하고 데이터베이스 호스트를 추가합니다
:hardbreaks:
:allow-uri-read: 
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ./media/


[role="lead"]
각 SAP HANA 데이터베이스 호스트에 SAP HANA용 SnapCenter 플러그인을 구축해야 합니다. SAP HANA 호스트에 SSH 키 기반 인증이 활성화되어 있는지 여부에 따라 플러그인 구축 방법 중 하나를 따를 수 있습니다.



== 필수 구성 요소

* 각 SAP HANA 데이터베이스 호스트에 Java 11(64비트) Oracle Java 또는 OpenJDK가 설치되어 있는지 확인합니다.
* 작업 환경을 추가하고 Connector를 만들어야 합니다.
* 커넥터가 작업 환경에 연결되어 있는지 확인합니다
* BlueXP 사용자에게 "계정 관리자" 역할이 있는지 확인합니다.
* SnapCenter 사용자를 생성하고 SnapCenter 사용자에 대해 sudo를 구성해야 합니다. 자세한 내용은 을 참조하십시오 link:task-deploy-snapcenter-plugin-for-sap-hana.html#configure-sudo-for-snapcenter-user["SnapCenter 사용자에 대해 sudo를 구성합니다."]
* 데이터베이스 호스트를 추가하기 전에 SAP HANA용 SnapCenter 플러그인을 구축해야 합니다.
* SAP HANA 데이터베이스 호스트를 추가하는 동안 HDB 사용자 저장소 키를 추가해야 합니다. HDB 보안 사용자 저장소 키는 SAP HANA 데이터베이스 호스트의 연결 정보를 클라이언트에 안전하게 저장하는 데 사용되며 HDBSQL 클라이언트는 보안 사용자 저장소 키를 사용하여 SAP HANA 데이터베이스 호스트에 연결합니다.
* HANA 시스템 복제(HSR)의 경우 HANA 시스템을 보호하려면 운영 및 보조 HANA 시스템을 모두 수동으로 등록해야 합니다.
* SSH 기반 구축을 사용하는 경우 커넥터는 SSH 포트에 대한 통신을 활성화해야 합니다(기본값: 22).
* 커넥터가 작동을 위해 플러그인 포트(기본값: 8145)에 대한 통신을 활성화해야 합니다.




== SnapCenter 사용자에 대해 sudo를 구성합니다

플러그인을 배포하려면 SnapCenter 사용자를 만들어야 합니다.

* 단계 *

. Connector VM에 로그인합니다.
. Linux 호스트 플러그인 바이너리를 다운로드합니다.
`sudo docker exec -it cloudmanager_scs_cloud curl -X GET 'http://127.0.0.1/deploy/downloadLinuxPlugin'`
. 기본 마운트 경로를 가져옵니다. 'SUDO Docker 볼륨 ls | grep scs_cloud_volume | awk {'print$2'} | xargs sudo Docker 볼륨 검사 | grep mountpoint'
. 에서 행 1을 16으로 복사합니다 `oracle_checksum_scs.txt` 파일 위치 `base_mount_path/version/sc-linux-host-plugin/`
. SAP HANA 데이터베이스 호스트에 로그인하고 다음 단계를 수행합니다.
+
.. SnapCenter 사용자 계정, 개인 키 쌍을 만들고 권한을 할당합니다.
.. 4단계에서 복사한 선을 에 붙여 넣습니다 `/etc/sudoers` visudo Linux 유틸리티를 사용하여 파일을 저장합니다.
+
위의 줄에서 <LINUXUSER> 를 만든 SnapCenter 사용자로 바꾸고 visualod 유틸리티에 저장합니다.







== SSH 키 기반 인증을 사용하여 플러그인을 구축합니다

HANA 호스트에 SSH 키 기반 인증이 설정되어 있는 경우 다음 단계를 수행하여 플러그인을 구축할 수 있습니다. 단계를 수행하기 전에 커넥터에 대한 SSH 연결이 활성화되어 있는지 확인합니다.

* 단계 *

. Connector VM에 로그인합니다.
. 기본 마운트 경로를 가져옵니다.
`# sudo docker volume ls | grep scs_cloud_volume | awk {'print $2'} | xargs sudo docker volume inspect | grep Mountpoint`
. 플러그인을 배포하십시오.
`# sudo <base_mount_path>/scripts/hana_plugin_copy_and_install.sh --host <host_name> --sshkey <ssh_key_file> --username <user_name> --port <ssh_port> --pluginport <plugin_port> --installdir <install_dir>`
+
** host_name 은 HANA 호스트의 이름이며 필수 매개 변수입니다.
** SSH_KEY_FILE은 HANA 호스트에 연결하는 데 사용되는 SSH 키이며 필수 매개 변수입니다.
** user_name: HANA 호스트에 대한 SSH 권한이 있는 사용자로, 이 매개 변수는 선택 사항입니다. 기본값은 azureuser입니다.
** SSH_PORT: HANA 호스트의 SSH 포트이며, 이는 선택적 매개 변수입니다. 기본값은 22입니다.
** plugin_port: 플러그인에서 사용하는 포트로, 이 매개 변수는 선택 사항입니다. 기본값은 8145입니다.
** install_dir: 플러그인이 배포될 디렉토리이며 선택적 매개 변수입니다. 기본값은 /opt입니다.




플러그인을 배포한 후에는 을 추가해야 합니다 link:task-deploy-snapcenter-plugin-for-sap-hana.html#add-sap-hana-database-hosts["SAP HANA 데이터베이스 호스트"]



== 플러그인을 수동으로 구축합니다

HANA 호스트에 SSH 키 기반 인증이 설정되어 있지 않은 경우 다음 수동 단계를 수행하여 플러그인을 구축해야 합니다.

* 단계 *

. Connector VM에 로그인합니다.
. Linux 호스트 플러그인 바이너리를 다운로드합니다.
`# sudo docker exec -it cloudmanager_scs_cloud curl -X GET 'http://127.0.0.1/deploy/downloadLinuxPlugin'`
. 기본 마운트 경로를 가져옵니다. 'SUDO Docker 볼륨 ls | grep scs_cloud_volume | awk {'print$2'} | xargs sudo Docker 볼륨 검사 | grep mountpoint'
. 다운로드한 플러그인의 바이너리 경로를 가져옵니다. sudo ls <base_mount_path>$(sudo docker PS | grep-Po "cloudmanager_scs_cloud:. *? "|SED-e's/ *$/'|cut-F2-d":")/SC-Linux-host-plugin/snapcenter_linux_host_plugin_scs.bin'
. 복사 `snapcenter_linux_host_plugin_scs.bin` 각 SAP HANA 데이터베이스 호스트에 SCP 또는 다른 대체 방법을 사용합니다.
. SAP HANA 데이터베이스 호스트에서 다음 명령을 실행하여 바이너리에 대한 실행 권한을 설정합니다.
`chmod +x snapcenter_linux_host_plugin_scs.bin`
. SAP HANA 플러그인을 sudo SnapCenter 사용자로 구축합니다.
`./snapcenter_linux_host_plugin_scs.bin -i silent -DSPL_USER=<non-root-user>`
. 복사 `certificate.p12` 보낸 사람 `<base_mount_path>/client/certificate/` 커넥터 VM의 경로 `/var/opt/snapcenter/spl/etc/` 플러그인 호스트에서
+
.. 로 이동합니다 `/var/opt/snapcenter/spl/etc` 키 도구 명령을 실행하여 인증서를 가져옵니다.
`keytool -v -importkeystore -srckeystore certificate.p12 -srcstoretype PKCS12 -destkeystore keystore.jks -deststoretype JKS -srcstorepass snapcenter -deststorepass snapcenter -srcalias agentcert -destalias agentcert -noprompt`
.. SPL을 다시 시작합니다:'stemctl restart SPL'


. Connector에서 다음 명령을 실행하여 커넥터에서 플러그인에 연결할 수 있는지 확인합니다.
+
`docker exec -it cloudmanager_scs_cloud curl -ik \https://<FQDN or IP of the plug-in host>:<plug-in port>/getVersion --cert /config/client/certificate/certificate.pem --key /config/client/certificate/key.pem`





== SAP HANA 데이터베이스 호스트를 추가합니다

정책을 할당하고 백업을 생성하려면 SAP HANA 데이터베이스 호스트를 수동으로 추가해야 합니다. SAP HANA 데이터베이스 호스트에 대한 자동 검색은 지원되지 않습니다.

* 단계 *

. BlueXP * UI에서 * 보호 * > * 백업 및 복구 * > * 응용 프로그램 * 을 클릭합니다.
. 응용 프로그램 검색 * 을 클릭합니다.
. Cloud Native * > * SAP HANA * 를 선택하고 * Next * 를 클릭합니다.
. 응용 프로그램 * 페이지에서 * 시스템 추가 * 를 클릭합니다.
. 시스템 세부 정보 * 페이지에서 다음 작업을 수행합니다.
+
.. 시스템 유형을 다중 테넌트 데이터베이스 컨테이너 또는 단일 컨테이너로 선택합니다.
.. SAP HANA 시스템 이름을 입력합니다.
.. SAP HANA 시스템의 SID를 지정합니다.
.. (선택 사항) HDBSQL OS 사용자를 지정합니다.
.. 플러그인 호스트 를 선택합니다. (선택 사항) 호스트가 추가되지 않았거나 여러 호스트를 추가하려는 경우 * 플러그인 호스트 추가 * 를 클릭합니다.
.. HANA 시스템이 HANA 시스템 복제로 구성된 경우 * HSR(HANA 시스템 복제) 시스템 * 을 활성화합니다.
.. HDB 보안 사용자 저장소 키 * 텍스트 상자를 클릭하여 사용자 저장소 키 세부 정보를 추가합니다.
+
키 이름, 시스템 세부 정보, 사용자 이름 및 암호를 지정하고 * 키 추가 * 를 클릭합니다.

+
사용자 저장소 키를 삭제하거나 수정할 수 있습니다.



. 다음 * 을 클릭합니다.
. Storage Footprint * 페이지에서 * 스토리지 추가 * 를 클릭하고 다음을 수행합니다.
+
.. 작업 환경을 선택하고 NetApp 계정을 지정합니다.
+
Canvas * 페이지로 이동하여 새 작업 환경을 추가합니다

.. 필요한 볼륨을 선택합니다.
.. 스토리지 추가 * 를 클릭합니다.


. 모든 세부 정보를 검토하고 * 시스템 추가 * 를 클릭합니다.



NOTE: 특정 호스트를 보기 위한 필터가 작동하지 않습니다. 필터에 호스트 이름을 지정하면 모든 호스트가 표시됩니다

REST API를 사용하여 SAP HANA 시스템을 수정 및 제거할 수 있습니다. HANA 시스템을 제거하기 전에 관련된 모든 백업을 삭제하고 보호를 제거해야 합니다.



=== 비 데이터 볼륨 추가

멀티 테넌트 데이터베이스 컨테이너 또는 단일 컨테이너 유형 SAP HANA 시스템을 추가한 후 HANA 시스템의 비 데이터 볼륨을 추가할 수 있습니다.

* 단계 *

. BlueXP * UI에서 * 보호 * > * 백업 및 복구 * > * 응용 프로그램 * 을 클릭합니다.
. 응용 프로그램 검색 * 을 클릭합니다.
. Cloud Native * > * SAP HANA * 를 선택하고 * Next * 를 클릭합니다.
. 응용 프로그램 * 페이지에서 을 클릭합니다 image:icon-action.png["아이콘을 클릭하여 작업을 선택합니다"] 비 데이터 볼륨을 추가하려는 시스템에 해당하는 * 시스템 관리 * > * 비 데이터 볼륨 * 을 선택합니다.




=== 글로벌 비 데이터 볼륨 추가

멀티 테넌트 데이터베이스 컨테이너 또는 단일 컨테이너 유형 SAP HANA 시스템을 추가한 후 HANA 시스템의 글로벌 비 데이터 볼륨을 추가할 수 있습니다.

* 단계 *

. BlueXP * UI에서 * 보호 * > * 백업 및 복구 * > * 응용 프로그램 * 을 클릭합니다.
. 응용 프로그램 검색 * 을 클릭합니다.
. Cloud Native * > * SAP HANA * 를 선택하고 * Next * 를 클릭합니다.
. 응용 프로그램 * 페이지에서 * 시스템 추가 * 를 클릭합니다.
. 시스템 세부 정보 * 페이지에서 다음 작업을 수행합니다.
+
.. 시스템 유형 드롭다운에서 * 글로벌 비 데이터 볼륨 * 을 선택합니다.
.. SAP HANA 시스템 이름을 입력합니다.
.. SAP HANA 시스템의 관련 SID를 지정합니다.
.. 플러그인 호스트를 선택합니다
+
(선택 사항) 여러 호스트를 추가하려면 * 플러그인 호스트 추가 * 를 클릭하고 호스트 이름과 포트를 지정한 다음 * 호스트 추가 * 를 클릭합니다.

.. 다음 * 을 클릭합니다.
.. 모든 세부 정보를 검토하고 * 시스템 추가 * 를 클릭합니다.



